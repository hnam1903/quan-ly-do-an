<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${user.id != null ? 'Sửa người dùng' : 'Thêm người dùng'} - QLDA</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>
    
    <main class="main-content has-dashboard">
        <div class="container">
            <div class="dashboard-layout">
                <div th:replace="~{fragments/admin-sidebar :: admin-sidebar}"></div>
                
                <div class="dashboard-content">
                    <h1 th:text="${user.id != null ? 'Sửa người dùng' : 'Thêm người dùng'}"></h1>
                    
                    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>
                    
                    <form th:action="${user.id != null ? '/admin/users/' + user.id : '/admin/users'}" 
                          th:object="${user}" method="post" class="form-container">
                <div class="form-group">
                    <label for="username">Username *</label>
                    <input type="text" id="username" th:field="*{username}" required 
                           th:readonly="${user.id != null}">
                </div>
                
                <div class="form-group">
                    <label for="password">Mật khẩu <span th:if="${user.id != null}">(để trống nếu không đổi)</span></label>
                    <input type="password" id="password" th:field="*{password}" 
                           th:required="${user.id == null}">
                </div>
                
                <div class="form-group">
                    <label for="hoTen">Họ tên *</label>
                    <input type="text" id="hoTen" th:field="*{hoTen}" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" th:field="*{email}">
                </div>
                
                <div class="form-group">
                    <label for="soDienThoai">Số điện thoại</label>
                    <input type="text" id="soDienThoai" th:field="*{soDienThoai}">
                </div>
                
                <div class="form-group">
                    <label for="lop">Lớp</label>
                    <input type="text" id="lop" th:field="*{lop}">
                </div>
                
                <div class="form-group">
                    <label for="chuyenNganh">Chuyên ngành</label>
                    <input type="text" id="chuyenNganh" th:field="*{chuyenNganh}">
                </div>
                
                <div class="form-group">
                    <label for="maSinhVien">Mã sinh viên</label>
                    <input type="text" id="maSinhVien" th:field="*{maSinhVien}">
                </div>
                
                <div class="form-group">
                    <label for="role">Vai trò *</label>
                    <select id="role" th:field="*{role}" required>
                        <option value="ROLE_ADMIN">Admin</option>
                        <option value="ROLE_GIANGVIEN">Giảng viên</option>
                        <option value="ROLE_SINHVIEN">Sinh viên</option>
                    </select>
                </div>
                
                <div class="form-group" th:if="${user.id != null}">
                    <label>
                        <input type="checkbox" th:field="*{active}">
                        Kích hoạt
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Lưu</button>
                    <a th:href="@{/admin/users}" class="btn btn-secondary">Hủy</a>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </main>
</body>
</html>



